import{k as i,bf as D,j as M,d0 as A,r as F,o as P,b as j,w as s,p as e,m,q as t,V as E,v as w,x as J,bg as O,D as g,E as V}from"./index.af080042.js";import{p as U}from"./helpers.0120d324.js";import{u as q}from"./useAppAbility.6fd3f36a.js";import{u as x,m as G,a as W}from"./useGenerateImageVariant.f2897076.js";import{a as $,b as z,c as H,d as K}from"./auth-v2-login-illustration-light.a2530d13.js";import{r as y,e as Q}from"./validators.7f578ad5.js";import{b as v}from"./route-block.2f1a6263.js";import{a as n,V as _}from"./VRow.a132dcf1.js";import{V as k}from"./VImg.7100ac31.js";import{V as X,c as I}from"./VCard.0fea083f.js";import{V as L}from"./VTextField.17ff38c5.js";import{V as Y}from"./VCheckbox.08a6376e.js";import{V as Z}from"./VBtn.40fda717.js";import{V as ee}from"./VForm.f0ffc626.js";import"./index.4c516342.js";import"./router.c6c27fcd.js";import"./VAvatar.8cdb6087.js";import"./position.161e618f.js";/* empty css                   */import"./VField.70383977.js";import"./index.4bf798e9.js";import"./VInput.daa96e72.js";import"./easing.36b781ab.js";import"./forwardRefs.c003b6b8.js";import"./VCounter.2e81d8da.js";import"./VCheckboxBtn.a4a3752b.js";import"./VSelectionControl.45d5fbf9.js";function te(...b){return U("/api/auth/login",...b)}const se={class:"position-relative auth-bg rounded-lg w-100 ma-8 me-0"},ae={class:"d-flex align-center justify-center w-100 h-100"},oe={class:"text-h5 font-weight-semibold mb-1"},re=m("p",{class:"mb-0"}," Please sign-in to your account ",-1),le={class:"d-flex align-center flex-wrap justify-space-between mt-2 mb-4"},ie=m("span",null,"New on our platform?",-1),ne={__name:"login",setup(b){const S=x(K,H,z,$,!0),C=x(W,G),u=i(!1);D(),M();const N=q(),R=A(),c=i({email:void 0,password:void 0}),h=i(),d=i(""),p=i(""),f=i(!1),T=()=>{te({email:d.value,password:p.value}).then(r=>{const{accessToken:a,userData:l,userAbilities:o}=r.data;localStorage.setItem("userAbilities",JSON.stringify(o)),N.update(o),localStorage.setItem("userData",JSON.stringify(l)),localStorage.setItem("accessToken",JSON.stringify("Bearer "+a)),console.log("test")}).catch(r=>{let a={errors:{email:["Email or Password is Invalid"]}};const{errors:l}=a;c.value=l,R.error(r.response.data.message,{position:"bottom-right",timeout:2500})})},B=()=>{var r;(r=h.value)==null||r.validate().then(({valid:a})=>{a&&T()})};return(r,a)=>{const l=F("RouterLink");return P(),j(_,{"no-gutters":"",class:"auth-wrapper"},{default:s(()=>[e(n,{lg:"8",class:"d-none d-lg-flex"},{default:s(()=>[m("div",se,[m("div",ae,[e(k,{"max-width":"505",src:t(S),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),e(k,{src:t(C),class:"auth-footer-mask"},null,8,["src"])])]),_:1}),e(n,{cols:"12",lg:"4",class:"d-flex align-center justify-center"},{default:s(()=>[e(X,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:s(()=>[e(I,null,{default:s(()=>[e(_,null,{default:s(()=>[e(n,{cols:"12",class:"text-center"},{default:s(()=>[e(t(E),{nodes:t(w).app.logo,class:"mb-6"},null,8,["nodes"]),m("h5",oe," Welcome to "+J(t(w).app.title),1),re]),_:1})]),_:1})]),_:1}),e(I,null,{default:s(()=>[e(t(ee),{ref_key:"refVForm",ref:h,onSubmit:O(B,["prevent"])},{default:s(()=>[e(_,null,{default:s(()=>[e(n,{cols:"12"},{default:s(()=>[e(L,{modelValue:t(d),"onUpdate:modelValue":a[0]||(a[0]=o=>g(d)?d.value=o:null),label:"Email",type:"email",rules:[t(y),t(Q)],"error-messages":t(c).email},null,8,["modelValue","rules","error-messages"])]),_:1}),e(n,{cols:"12"},{default:s(()=>[e(L,{modelValue:t(p),"onUpdate:modelValue":a[1]||(a[1]=o=>g(p)?p.value=o:null),label:"Password",rules:[t(y)],type:t(u)?"text":"password","error-messages":t(c).password,"append-inner-icon":t(u)?"tabler-eye-off":"tabler-eye","onClick:appendInner":a[2]||(a[2]=o=>u.value=!t(u))},null,8,["modelValue","rules","type","error-messages","append-inner-icon"]),m("div",le,[e(Y,{modelValue:t(f),"onUpdate:modelValue":a[3]||(a[3]=o=>g(f)?f.value=o:null),label:"Remember me"},null,8,["modelValue"]),e(l,{class:"text-primary ms-2 mb-1",to:{name:"forgot-password"}},{default:s(()=>[V(" Forgot Password? ")]),_:1})]),e(Z,{block:"",type:"submit"},{default:s(()=>[V(" Login ")]),_:1})]),_:1}),e(n,{cols:"12",class:"text-center"},{default:s(()=>[ie,e(l,{class:"text-primary ms-2",to:{name:"register"}},{default:s(()=>[V(" Create an account ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1})}}};typeof v=="function"&&v(ne);export{ne as default};
