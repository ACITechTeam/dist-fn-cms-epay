import{j as L,k as c,Z as _,A as N,r as B,o as h,c as v,p as o,w as n,m as e,q as r,D as x,C as F,E as g,F as Y,a as $,x as s,H as E,I as H,a4 as M}from"./index.00bf99ae.js";import{u as U}from"./useAppAbility.05bd88b1.js";import{u as j,h as q}from"./moment.30ee599a.js";import{a as O,V as Q}from"./VRow.069165a8.js";import{V as Z,c as b}from"./VCard.f1bae444.js";import{V as G}from"./VTextField.a0c34198.js";import{V as J}from"./VSelect.c01c57f7.js";import{V as K}from"./VSpacer.b2e1ed29.js";import{V as W}from"./VBtn.d4ad8a26.js";import{V as y}from"./VDivider.a1f2b9a9.js";import{V as X}from"./VTable.6e1af7a5.js";import{V as ee}from"./VImg.cb227d48.js";import{V as te}from"./VChip.cba303d3.js";import{V as ae}from"./VPagination.f8a87296.js";import"./helpers.08e2bfbc.js";import"./VAvatar.6fc06fd5.js";import"./router.0dce1073.js";import"./position.68533ca2.js";/* empty css                   */import"./VField.6abd2ff0.js";import"./index.523f5a59.js";import"./VInput.0f0d858d.js";import"./easing.36b781ab.js";import"./forwardRefs.c003b6b8.js";import"./VCounter.56b29c94.js";import"./VList.0897a0c1.js";import"./dialog-transition.0aa9919c.js";import"./VMenu.1a513896.js";import"./scopeId.7666985b.js";import"./VOverlay.d8c27df2.js";import"./lazy.1c71607a.js";import"./VCheckboxBtn.157b3ae9.js";import"./VSelectionControl.230a8cbd.js";const oe={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},le={class:"me-3"},se={class:"d-flex align-center flex-wrap gap-4"},ie=e("thead",null,[e("tr",null,[e("th",{scope:"col"}," # Order ID "),e("th",{scope:"col"}," Payment Type "),e("th",{scope:"col"}," Date Time "),e("th",{scope:"col"}," Name "),e("th",{scope:"col"}," Reference Number "),e("th",{scope:"col"}," Channel "),e("th",{scope:"col"}," Amount (Rp) "),e("th",{scope:"col"}," Status ")])],-1),re={class:"d-flex align-center me-3"},ne={class:"me-3"},ce={class:"d-flex flex-column"},de={class:"text-base"},ue={class:"text-sm text-disabled"},me={class:"text-capitalize text-medium-emphasis"},pe={class:"text-base"},fe={class:"text-sm text-disabled"},_e={class:"text-capitalize text-base"},he={class:"text-capitalize text-base font-weight-semibold"},ve={class:"text-capitalize text-capitalize text-medium-emphasis"},xe=e("tr",null,[e("td",{colspan:"7",class:"text-center"}," No data available ")],-1),ge=[xe],Ve={class:"text-sm text-disabled"},tt={__name:"index",setup(be){const w=L(),T=U(),S=j(),p=c(""),d=c(10),i=c(1),u=c(1),V=c(0),m=c([]),f=c([]),D=()=>{S.fetchTrans({q:p.value,perPage:d.value,currentPage:i.value}).then(t=>{m.value=t.data.trans,u.value=t.data.totalPage,V.value=t.data.totalTrans}).catch(t=>{t.response.status==401&&(localStorage.removeItem("userData"),localStorage.removeItem("accessToken"),P())})};function P(){w.push("/login").then(()=>{localStorage.removeItem("userAbilities"),T.update(M)})}_(D),_(()=>{i.value>u.value&&(i.value=u.value)}),_(()=>{i.value>u.value&&(i.value=u.value)});const k=N(()=>{const t=m.value.length?(i.value-1)*d.value+1:0,l=m.value.length+(i.value-1)*d.value;return`Showing ${t} to ${l} of ${V.value} entries`}),C=t=>t==="failed"?"error":t==="cancel"?"secondary":t==="paid"?"success":t==="expired"?"error":t==="pending"?"warning":"secondary",I=t=>(t/1).toFixed(2).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".");function z(t){setTimeout(()=>{f.value[t]=!1},2e3)}const R=t=>{f.value[t]=!0,z(t)};return(t,l)=>{const A=B("RouterLink");return h(),v("section",null,[o(Q,null,{default:n(()=>[o(O,{cols:"12"},{default:n(()=>[o(Z,{title:"List Transactions"},{default:n(()=>[o(b,{class:"d-flex flex-wrap py-4 gap-4"},{default:n(()=>[e("div",oe,[o(G,{modelValue:r(p),"onUpdate:modelValue":l[0]||(l[0]=a=>x(p)?p.value=a:null),label:"Search",placeholder:"Search",density:"compact"},null,8,["modelValue"]),e("div",le,[o(J,{modelValue:r(d),"onUpdate:modelValue":l[1]||(l[1]=a=>x(d)?d.value=a:null),label:"Per page",density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])])]),o(K),e("div",se,[o(W,{color:"info",loading:r(f)[0],disabled:r(f)[0],onClick:l[2]||(l[2]=a=>R(0))},{default:n(()=>[o(F,{start:"",icon:"tabler-refresh"}),g(" refresh ")]),_:1},8,["loading","disabled"])])]),_:1}),o(y),o(X,{class:"text-no-wrap"},{default:n(()=>[ie,e("tbody",null,[(h(!0),v(Y,null,$(r(m),a=>(h(),v("tr",{key:a.order_id,style:{height:"3.75rem"}},[e("td",null,[o(A,{to:{name:"transactions-view-id",params:{id:a.order_id}}},{default:n(()=>[g(" # "+s(a.order_id),1)]),_:2},1032,["to"])]),e("td",null,[e("div",re,[e("div",ne,[o(ee,{src:a.image_payment,width:"50"},null,8,["src"])]),e("div",ce,[e("h6",de,s(a.description_payment),1),e("span",ue,s(a.type_payment),1)])])]),e("td",me,s(r(q)(a.transaction_time).format("DD MMM YYYY HH:mm:ss")),1),e("td",null,[e("h6",pe,s(a.name),1),e("span",fe,s(a.email),1)]),e("td",null,[e("span",_e,s(a.reference_number),1)]),e("td",null,[e("span",he,s(a.name_payment_gateway),1)]),e("td",null,[e("span",ve,s(I(a.amount)),1)]),e("td",null,[o(te,{label:"",color:C(a.status),size:"small",class:"text-capitalize"},{default:n(()=>[g(s(a.status),1)]),_:2},1032,["color"])])]))),128))]),E(e("tfoot",null,ge,512),[[H,!r(m).length]])]),_:1}),o(y),o(b,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:n(()=>[e("span",Ve,s(r(k)),1),o(ae,{modelValue:r(i),"onUpdate:modelValue":l[3]||(l[3]=a=>x(i)?i.value=a:null),size:"small","total-visible":5,length:r(u)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1})])}}};export{tt as default};
