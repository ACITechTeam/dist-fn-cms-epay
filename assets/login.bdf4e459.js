import{k as i,bf as P,j as A,d0 as F,r as j,o as q,b as E,w as s,p as e,m,q as t,V as J,v as w,x as O,bg as U,D as g,E as V}from"./index.21f89cf1.js";import{p as G}from"./helpers.b497239a.js";import{u as W}from"./useAppAbility.08f107d7.js";import{u as x,m as $,a as z}from"./useGenerateImageVariant.64455a79.js";import{a as H,b as K,c as Q,d as X}from"./auth-v2-login-illustration-light.a2530d13.js";import{r as v,e as Y}from"./validators.7f578ad5.js";import{b as k}from"./route-block.2f1a6263.js";import{a as n,V as _}from"./VRow.6ac940f5.js";import{V as I}from"./VImg.e02759c4.js";import{V as Z,c as S}from"./VCard.50caf3b2.js";import{V as L}from"./VTextField.2dcfb508.js";import{V as ee}from"./VCheckbox.1712fd28.js";import{V as te}from"./VBtn.2e45e71c.js";import{V as se}from"./VForm.b79aef8f.js";import"./index.4c516342.js";import"./router.70cda0d5.js";import"./VAvatar.338177a3.js";import"./position.d054d2c1.js";/* empty css                   */import"./VField.3c90dd8f.js";import"./index.2425f2a3.js";import"./VInput.aa85b183.js";import"./easing.36b781ab.js";import"./forwardRefs.c003b6b8.js";import"./VCounter.2ba810c4.js";import"./VCheckboxBtn.67d9ec36.js";import"./VSelectionControl.9a544fa1.js";function ae(...b){return G("/api/auth/login",...b)}const oe={class:"position-relative auth-bg rounded-lg w-100 ma-8 me-0"},re={class:"d-flex align-center justify-center w-100 h-100"},le={class:"text-h5 font-weight-semibold mb-1"},ie=m("p",{class:"mb-0"}," Please sign-in to your account ",-1),ne={class:"d-flex align-center flex-wrap justify-space-between mt-2 mb-4"},me=m("span",null,"New on our platform?",-1),ue={__name:"login",setup(b){const C=x(X,Q,K,H,!0),N=x(z,$),u=i(!1),h=P(),R=A(),T=W(),B=F(),c=i({email:void 0,password:void 0}),y=i(),d=i("ferdy.damin@ciputralife.com"),p=i("P@ssw0rd"),f=i(!1),D=()=>{ae({email:d.value,password:p.value}).then(r=>{const{accessToken:a,userData:l,userAbilities:o}=r.data;localStorage.setItem("userAbilities",JSON.stringify(o)),T.update(o),localStorage.setItem("userData",JSON.stringify(l)),localStorage.setItem("accessToken",JSON.stringify("Bearer "+a)),R.replace(h.query.to?String(h.query.to):"/")}).catch(r=>{let a={errors:{email:["Email or Password is Invalid"]}};const{errors:l}=a;c.value=l,B.error(r.response.data.message,{position:"bottom-right",timeout:2500})})},M=()=>{var r;(r=y.value)==null||r.validate().then(({valid:a})=>{a&&D()})};return(r,a)=>{const l=j("RouterLink");return q(),E(_,{"no-gutters":"",class:"auth-wrapper"},{default:s(()=>[e(n,{lg:"8",class:"d-none d-lg-flex"},{default:s(()=>[m("div",oe,[m("div",re,[e(I,{"max-width":"505",src:t(C),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),e(I,{src:t(N),class:"auth-footer-mask"},null,8,["src"])])]),_:1}),e(n,{cols:"12",lg:"4",class:"d-flex align-center justify-center"},{default:s(()=>[e(Z,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:s(()=>[e(S,null,{default:s(()=>[e(_,null,{default:s(()=>[e(n,{cols:"12",class:"text-center"},{default:s(()=>[e(t(J),{nodes:t(w).app.logo,class:"mb-6"},null,8,["nodes"]),m("h5",le," Welcome to "+O(t(w).app.title),1),ie]),_:1})]),_:1})]),_:1}),e(S,null,{default:s(()=>[e(t(se),{ref_key:"refVForm",ref:y,onSubmit:U(M,["prevent"])},{default:s(()=>[e(_,null,{default:s(()=>[e(n,{cols:"12"},{default:s(()=>[e(L,{modelValue:t(d),"onUpdate:modelValue":a[0]||(a[0]=o=>g(d)?d.value=o:null),label:"Email",type:"email",rules:[t(v),t(Y)],"error-messages":t(c).email},null,8,["modelValue","rules","error-messages"])]),_:1}),e(n,{cols:"12"},{default:s(()=>[e(L,{modelValue:t(p),"onUpdate:modelValue":a[1]||(a[1]=o=>g(p)?p.value=o:null),label:"Password",rules:[t(v)],type:t(u)?"text":"password","error-messages":t(c).password,"append-inner-icon":t(u)?"tabler-eye-off":"tabler-eye","onClick:appendInner":a[2]||(a[2]=o=>u.value=!t(u))},null,8,["modelValue","rules","type","error-messages","append-inner-icon"]),m("div",ne,[e(ee,{modelValue:t(f),"onUpdate:modelValue":a[3]||(a[3]=o=>g(f)?f.value=o:null),label:"Remember me"},null,8,["modelValue"]),e(l,{class:"text-primary ms-2 mb-1",to:{name:"forgot-password"}},{default:s(()=>[V(" Forgot Password? ")]),_:1})]),e(te,{block:"",type:"submit"},{default:s(()=>[V(" Login ")]),_:1})]),_:1}),e(n,{cols:"12",class:"text-center"},{default:s(()=>[me,e(l,{class:"text-primary ms-2",to:{name:"register"}},{default:s(()=>[V(" Create an account ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1})}}};typeof k=="function"&&k(ue);export{ue as default};
