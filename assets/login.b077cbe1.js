import{k as i,bf as A,j as F,d0 as P,r as j,o as q,b as E,w as s,p as e,m,q as t,V as J,v as w,x as O,bg as U,D as g,E as V}from"./index.840af836.js";import{p as G}from"./helpers.c56bb10f.js";import{u as W}from"./useAppAbility.a8d60af1.js";import{u as x,m as $,a as z}from"./useGenerateImageVariant.6b600d13.js";import{a as H,b as K,c as Q,d as X}from"./auth-v2-login-illustration-light.a2530d13.js";import{r as v,e as Y}from"./validators.7f578ad5.js";import{b as k}from"./route-block.2f1a6263.js";import{a as n,V as _}from"./VRow.004b8925.js";import{V as I}from"./VImg.9bd5c784.js";import{V as Z,c as S}from"./VCard.877b2aff.js";import{V as L}from"./VTextField.1f68c2a4.js";import{V as ee}from"./VCheckbox.63db4205.js";import{V as te}from"./VBtn.e371d709.js";import{V as se}from"./VForm.0f380542.js";import"./index.4c516342.js";import"./router.e298f1ad.js";import"./VAvatar.fb59c9cc.js";import"./position.555f291f.js";/* empty css                   */import"./VField.ed0a4eb5.js";import"./index.a0a6e474.js";import"./VInput.0c30287c.js";import"./easing.36b781ab.js";import"./forwardRefs.c003b6b8.js";import"./VCounter.5c41081b.js";import"./VCheckboxBtn.b946a05b.js";import"./VSelectionControl.30535b76.js";function oe(...b){return G("/api/auth/login",...b)}const ae={class:"position-relative auth-bg rounded-lg w-100 ma-8 me-0"},re={class:"d-flex align-center justify-center w-100 h-100"},le={class:"text-h5 font-weight-semibold mb-1"},ie=m("p",{class:"mb-0"}," Please sign-in to your account ",-1),ne={class:"d-flex align-center flex-wrap justify-space-between mt-2 mb-4"},me=m("span",null,"New on our platform?",-1),ue={__name:"login",setup(b){const C=x(X,Q,K,H,!0),N=x(z,$),u=i(!1),h=A(),R=F(),T=W(),B=P(),c=i({email:void 0,password:void 0}),y=i(),d=i(""),p=i(""),f=i(!1),D=()=>{oe({email:d.value,password:p.value}).then(r=>{const{accessToken:o,userData:l,userAbilities:a}=r.data;localStorage.setItem("userAbilities",JSON.stringify(a)),T.update(a),localStorage.setItem("userData",JSON.stringify(l)),localStorage.setItem("accessToken",JSON.stringify("Bearer "+o)),R.replace(h.query.to?String(h.query.to):"/")}).catch(r=>{let o={errors:{email:["Email or Password is Invalid"]}};const{errors:l}=o;c.value=l,B.error(r.response.data.message,{position:"bottom-right",timeout:2500})})},M=()=>{var r;(r=y.value)==null||r.validate().then(({valid:o})=>{o&&D()})};return(r,o)=>{const l=j("RouterLink");return q(),E(_,{"no-gutters":"",class:"auth-wrapper"},{default:s(()=>[e(n,{lg:"8",class:"d-none d-lg-flex"},{default:s(()=>[m("div",ae,[m("div",re,[e(I,{"max-width":"505",src:t(C),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),e(I,{src:t(N),class:"auth-footer-mask"},null,8,["src"])])]),_:1}),e(n,{cols:"12",lg:"4",class:"d-flex align-center justify-center"},{default:s(()=>[e(Z,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:s(()=>[e(S,null,{default:s(()=>[e(_,null,{default:s(()=>[e(n,{cols:"12",class:"text-center"},{default:s(()=>[e(t(J),{nodes:t(w).app.logo,class:"mb-6"},null,8,["nodes"]),m("h5",le," Welcome to "+O(t(w).app.title),1),ie]),_:1})]),_:1})]),_:1}),e(S,null,{default:s(()=>[e(t(se),{ref_key:"refVForm",ref:y,onSubmit:U(M,["prevent"])},{default:s(()=>[e(_,null,{default:s(()=>[e(n,{cols:"12"},{default:s(()=>[e(L,{modelValue:t(d),"onUpdate:modelValue":o[0]||(o[0]=a=>g(d)?d.value=a:null),label:"Email",type:"email",rules:[t(v),t(Y)],"error-messages":t(c).email},null,8,["modelValue","rules","error-messages"])]),_:1}),e(n,{cols:"12"},{default:s(()=>[e(L,{modelValue:t(p),"onUpdate:modelValue":o[1]||(o[1]=a=>g(p)?p.value=a:null),label:"Password",rules:[t(v)],type:t(u)?"text":"password","error-messages":t(c).password,"append-inner-icon":t(u)?"tabler-eye-off":"tabler-eye","onClick:appendInner":o[2]||(o[2]=a=>u.value=!t(u))},null,8,["modelValue","rules","type","error-messages","append-inner-icon"]),m("div",ne,[e(ee,{modelValue:t(f),"onUpdate:modelValue":o[3]||(o[3]=a=>g(f)?f.value=a:null),label:"Remember me"},null,8,["modelValue"]),e(l,{class:"text-primary ms-2 mb-1",to:{name:"forgot-password"}},{default:s(()=>[V(" Forgot Password? ")]),_:1})]),e(te,{block:"",type:"submit"},{default:s(()=>[V(" Login ")]),_:1})]),_:1}),e(n,{cols:"12",class:"text-center"},{default:s(()=>[me,e(l,{class:"text-primary ms-2",to:{name:"register"}},{default:s(()=>[V(" Create an account ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1})}}};typeof k=="function"&&k(ue);export{ue as default};
